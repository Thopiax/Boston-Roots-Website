I"ì(function() {
  var setBackgroundSize;

  $(document).ready(function() {
    var nav, nav_height, win_top_above;
    nav = $("nav", "#site_wrapper");
    nav_height = nav.height();
    win_top_above = true;
    $(window).on("load resize", function() {
      var home, mission;
      home = $("#home");
      mission = $("#mission");
      setBackgroundSize(home);
      return setBackgroundSize(mission);
    });
    return $(window).on("load scroll", function() {
      var win_top;
      win_top = $(window).scrollTop();
      if (win_top > nav_height && win_top_above) {
        nav.velocity({
          "box-shadow": "2px 2px 10px black",
          "background-color": "$sec_color"
        });
        win_top_above = !win_top_above;
      } else if (win_top < nav_height && !win_top_above) {
        nav.velocity({
          "box-shadow": "",
          "background-color": ""
        });
        win_top_above = !win_top_above;
      }
    });
  });

  setBackgroundSize = function(div) {
    var bg_size, cnt_ratio, img_ratio, tmp;
    tmp = new Image;
    tmp.src = div.css('background-image').replace(/url\(|\)$/ig, "");
    bg_size = "";
    img_ratio = tmp.height / tmp.width;
    cnt_ratio = div.height() / div.width();
    if (cnt_ratio > img_ratio) {
      bg_size = (div.height() * img_ratio) + "px " + (div.height()) + "px";
    } else {
      bg_size = (div.width()) + "px " + (div.width() / img_ratio) + "px";
    }
    return div.css({
      "background-size": bg_size
    });
  };

}).call(this);
:ET